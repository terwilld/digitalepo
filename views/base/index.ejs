<% layout('layouts/boilerplate') %>

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" />

<div class="container">
    <h1 class="text-center mb-5 fw-bold fs-1" style="font-family: 'Montserrat-black'">Digital EPO</h1>
    <div class="well text-center">
        <div class="row justify-content-center">
            <div class="col-md-2">
                <a href="#"><img src="img/Syringe.jpg" alt="ccs_logo" class="img-fluid"></a>
            </div>
            <div class="col-md-2">
                <a href="#"><img src="img/Computer.jpg" alt="inn_logo" class="img-fluid"></a>
            </div>

        </div>
    </div>
</div>
<br>
<div class="container">
    <div class="row justify-content-center">
        <div class="col-10">
            <h1 class="text-center mb-5 fw-bold fs-3" style="font-family: 'Montserrat-black'">Upload a file, select
                adjustment
                parameters and submit for
                processing</h1>

            <form action="/" method="post" novalidate class="validated-form" enctype="multipart/form-data">
                <div class="row mt-3">
                    <div class="col-7">
                        <label for="gpxfile" class="form-label fw-semibold">Upload a TCX or GPX activity file: </label>
                        <input class="form-control" type="file" id="gpxfile" name="gpxfile" required>
                        <div class="invalid-feedback">
                            Upload one file of format {filename}.{extension}.
                        </div>
                    </div>
                    <div class="px-3 col-5 py-3 fw-light fs-7 my-3">
                        <label for="gpxfile" class="form-label fw-light"> Select a TCX or GPX file</label>
                    </div>
                </div>

                <div class="row">
                    <div class="col-7">
                        <label for="PercentSpeedIncrease" class="form-label">Percent Speed Increase:
                            &nbsp;</label><output id="PercentSpeedIncreaseForm">0%</output>
                        <div class="form-group input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fas fa-tachometer-alt"></i> </span>

                            </div>
                            <input type="range" min="-50" max="200" value="0" class="form-range col-sm"
                                name="percentSpeedIncrease" id="PercentSpeedIncrease"
                                oninput="getElementById('PercentSpeedIncreaseForm').value=this.value+'% '">
                        </div>
                    </div>

                    <div class="col-5 pt-3 fw-light fs-7 my-auto">
                        <label for="PercentSpeedIncrease" class="form-label ">Adjust activity
                            speed faster {positive %} or slower {negative %}</label>
                    </div>
                </div>

                <div class="row pt-4">
                    <div class="col-7">
                        <label for="PercentWattsIncrease" class="form-label">Percent Watts Increase {or
                            decrease}:
                            &nbsp;</label><output id="PercentWattsIncreaseForm">0%</output>
                        <div class="form-group input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fas fa-bolt"></i> </span>

                            </div>
                            <input type="range" min="-50" max="200" value="0" class="form-range col-sm"
                                name="percentWattsIncrease" id="PercentWattsIncrease"
                                oninput="getElementById('PercentWattsIncreaseForm').value=this.value+'% '">
                        </div>
                    </div>
                    <div class="col-5 pt-3 fw-light fs-7 my-auto">
                        <label for="PercentWattsIncrease" class="form-label ">If Power data is present, adjust the power
                            data higher {positive %} or lower {negative %}</label>
                    </div>
                </div>

                <div class="row pt-4">
                    <div class="col-7">
                        <label for="PercentHeartRateIncrease" class="form-label">Heat rate Increase {or
                            decrease}:&nbsp;</label><output id="HeartRateIncreaseForm">0%</output>

                        <div class="form-group input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fas fa-heart"></i> </span>
                            </div>
                            <input type="range" min="-50" max="200" value="0" class="form-range col-sm"
                                name="percentHeartRateIncrease" id="PercentHeartRateIncrease"
                                oninput="getElementById('HeartRateIncreaseForm').value=this.value+'% '">
                        </div>
                    </div>
                    <div class="col-5 pt-3 fw-light fs-7 my-auto">
                        <label for="PercentHeartRateIncrease" class="form-label ">If heartrate data is present, adjust
                            HR values
                            higher {positive %} or lower {negative %}</label>
                    </div>
                </div>

                <div class="row pt-4">
                    <div class="col-7">
                        <label for="hourOffset" class="form-label">Add or subtract hours from activity time:</label>
                        <div class="input-group mb-3">
                            <span class="input-group-text"> <i class="fas fa-stopwatch"></i> </span>
                            <input type="number" class="form-control" value="0" name="hourOffset" id="hourOffset"
                                aria-describedby="basic-addon3">
                            <div class="invalid-feedback">
                                Please input a positive or negative integer value!
                            </div>
                        </div>
                    </div>
                    <div class="col-5 pt-3 fw-light fs-7 my-auto">
                        <label for="hourOffset" class="form-label ">Add or subtract hours from data</label>
                    </div>
                </div>

                <div class="row">
                    <div class="mb-3 my-4 col-7">
                        <button class="btn btn-warning px-2 mb-3" type="reset">Reset All Fields</button>
                        <button class="btn btn-success px-2 mb-3 float-end" type="submit">Submit</button>
                    </div>
                </div>
            </form>
        </div>

    </div>
</div>
<br><br>
<div class="container">
    <div class="row justify-content-center">
        <div class="col-10">
            <h1 class="text-center mb-5 fw-bold fs-1" style="font-family: 'Montserrat-black'">How It Works:</h1>

            <ol class="gradient-list">
                <li>Select a TCX or GPX file. This should be an activity file in XML
                    format as exported from an activity tracking platform. Activity files can be downloaded
                    from Garmin connect or a strava activity
                    i.e. strava.com/activities/{Some activity number}/export_tcx</li>

                <li>Adjust the activity's speed either faster or slower {positive or negative %}. Time within the
                    datapoints gets compressed or expanded relative to the starting
                    Some data points will need to be eliminated; a speed increase compresses time points. After rounding
                    duplicate time points must be eliminated
                </li>
                <li>If power data is present, scale power data by a % either increasing or decreasing power. This does
                    not affect estimated power if power data is not presnet in the original file</li>

                <li>If heart rate data is present, scales heart rate data. No effect if heart rate data is not in data
                </li>

                <li>Shift the start time and all other datapoints an integer number of hours. Positive or negative
                    integers are accepted.
                    i.e. a value of 24 will shift the resulting file one day after the input file. A value of -48 will
                    shift the data two
                    days before the original files date</li>

            </ol>
        </div>
    </div>
</div>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-10">
            <!-- 16:9 -->
            <h4>Brief Tutorial:</h4>
            <div class="embed-responsive embed-responsive-16by9">
                <iframe class="embed-responsive-item"
                    src="https://www.youtube.com/embed/PZmkxXHaUvY?si=gCLcUweJgQGvYmns"></iframe>
            </div>
        </div>
    </div>
</div>


<!-- 
//www.youtube.com/embed/zB4I68XVPzQ 
-->



<script>
    (function () {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll('.validated-form')

        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
            })
    })()
</script>

<!-- 
https://codepen.io/erinesullivan/pen/qGrdGV
https://bootstrapious.com/p/bootstrap-tips-and-tricks

 -->

<!--             
            <div class="form-group input-group">

                <div class="input-group-prepend">
                    <span class="input-group-text"> <i class="fa fa-user"></i></span>
                    <label for="timeShift" class="form-label">&nbsp;&nbsp;Heatrate Increase {or decrease}:
                        &nbsp;</label><output id="HeartRateIncreaseForm">0%</output>
                </div>

                <input name="derp" class="form-control" placeholder="Shift Time of activity" id="timeShift"
                    type="number">
            </div>


            <div class="form-group input-group">

                <span class="input-group-text"> <i class="fa fa-user"></i></span>
                <label for="timeShift" class="form-label">&nbsp;&nbsp;Heatrate Increase {or decrease}:
                    &nbsp;</label><output id="HeartRateIncreaseForm">0%</output>


                <input name="derp" class="form-control" placeholder="Shift Time of activity" id="timeShift"
                    type="number">
            </div> -->


<!-- <div class="mb-3">
                <label class="form-label" for="price">Price: </label>
                <input class="form-control" type="text" name="campground[price]" id="price">
            </div> -->



<!-- 

<input type="range" class="form-range" id="customRange1" oninput="this.previousElementSibling.value = this.value+'% '"> -->




<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">